@model dynamic
@{
    ViewData["Title"] = "Inicio";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<div class="dashboard-container">
    <div class="header bg-primary text-white p-3 d-flex justify-content-between align-items-center">
        <h2 class="mb-0">Panel de Finanzas</h2>
        <div>
            <a href="/Account/Logout" class="btn btn-outline-light me-2">Cerrar Sesión</a>
            <a href="@Url.Action("Create", "Entrada")" class="btn btn-light text-primary">Agregar Dinero</a>
        </div>
    </div>

    <div class="totals row text-center mt-4 mb-4">
        <div class="col">
            <h4>Total Disponible</h4>
            <p class="fs-4 text-success">@String.Format("{0:C}", Model.TotalIngresos)</p>
        </div>
        <div class="col">
            <h4>Gastos Totales</h4>
            <p class="fs-4 text-danger">@String.Format("{0:C}", Model.TotalGastos)</p>
        </div>
        <div class="col">
            <h4>Saldo Actual</h4>
            <p class="fs-4 text-primary">@String.Format("{0:C}", Model.SaldoActual)</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-3 border-end">
            <h5>Categorías</h5>
            <ul class="list-group">
                @foreach(var cat in Model.Categorias)
                {
                    <li class="list-group-item">@cat.Nombre</li>
                }
            </ul>
            <a href="@Url.Action("Index", "Categoria")" class="btn btn-primary mt-3 w-100">Gestionar Categorías</a>
        </div>

        <div class="col-md-9">
            <h4>Últimos Gastos</h4>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Fecha</th>
                        <th>Descripción</th>
                        <th>Monto</th>
                    </tr>
                </thead>
                <tbody>
                    @if(Model.Gastos.Count == 0)
                    {
                        <tr>
                            <td colspan="3" class="text-center text-muted">Sin movimientos registrados</td>
                        </tr>
                    }
                    else
                    {
                        foreach(var gasto in Model.Gastos)
                        {
                            <tr>
                                <td>@gasto.Fecha.ToShortDateString()</td>
                                <td>@gasto.Descripcion</td>
                                <td class="text-danger">@String.Format("{0:C}", gasto.Monto)</td>
                            </tr>
                        }
                    }
                </tbody>
            </table>

            <div class="mt-3">
                <a href="@Url.Action("Index", "Gasto")" class="btn btn-primary">Ver Todos los Gastos</a>
                <a href="@Url.Action("Create", "Gasto")" class="btn btn-success ms-2">Agregar Gasto</a>
            </div>
        </div>
    </div>
</div>

<style>
    .dashboard-container {
        background-color: #fff;
        padding: 2rem;
        font-family: 'Segoe UI', sans-serif;
    }
    .header {
        background-color: #007bff;
    }
</style>
